<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>车辆列表</title>
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="车辆列表">
    <link href="../image/ioc/favicon.ico" rel="icon" type="image/x-ico">
    <!--
        <link rel="stylesheet" type="text/css" href="styles.css">
        -->

    <link rel="stylesheet" href="../js/layuiadmin/style/login.css" media="all">
    <script type="text/javascript" src="../js/jquery-1.12.4.js"></script>
    <script src="../js/layuiadmin/layui/layui.js" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="../js/layuiadmin/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="./css/style.css">
</head>

<body class="layui-layout-body layui-anim  layui-anim-fadein layui-anim-scaleSpring  " style="overflow-y:scroll;">
<!--<input type="hidden" id="path" name="path" value="${pageContext.request.contextPath }" />-->
<!-- 内容主体区域 -->
<div id="body-box" class=" layui-anim  layui-anim-scale layui-anim-fadein" style="padding: 15px;">
    <div class="demoTable">
        <form class="layui-form layui-form-pane">
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">搜索名称:</label>
                    <div class="layui-inline">
                        <input style="width: 212px;" id="demoReload" type="text" name="title"
                               placeholder="请输入标题"
                               autocomplete="off" class="layui-input">
                    </div>
                    <div class="layui-inline">
                        <button type="button" class="layui-btn" data-type="reload">
                            <i class="layui-icon">&#xe615;</i> 查找
                        </button>
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">日期范围:</label>
                    <div class="layui-inline">
                        <input id="time" type="text" class="layui-input">
                    </div>

                    <div class="layui-inline">
                        <button type="button" class="layui-btn" data-type="timeselect">
                            <i class="layui-icon">&#xe615;</i> 查找
                        </button>
                    </div>
                </div>
                <!--<div class="layui-inline">-->
                <!--<label class="layui-form-label">单子类型</label>-->
                <!--<div class="layui-inline">-->
                <!--<select name="" lay-verify="selectnull">-->
                <!--<option value="">请选择</option>-->
                <!--<option value="0">预约</option>-->
                <!--<option value="1">非预约</option>-->
                <!--</select>-->
                <!--</div>-->
                <!--<div class="layui-inline">-->
                <!--<button type="button" class="layui-btn" data-type="timeselect">-->
                <!--<i class="layui-icon">&#xe615;</i> 查找-->
                <!--</button>-->
                <!--</div>-->
                <!--</div>-->
            </div>
            <!--            <div class="layui-form-item">-->
            <!--                <label class="layui-form-label">是否办理</label>-->
            <!--                <div class="layui-input-block">-->
            <!--                    <select name="complete" lay-filter="complete">-->
            <!--                        <option value="">全部</option>-->
            <!--                        <option value="1">已办理</option>-->
            <!--                        <option value="0" selected>未办理</option>-->
            <!--                        <option value="2" >拒绝办理</option>-->
            <!--                    </select>-->
            <!--                </div>-->
            <!--            </div>-->
        </form>
        <button style="display: none;" id="shuaxing" class="layui-btn" data-type="shuaxing">刷新</button>
        <!-- <button class="layui-btn" data-type="addSort1">新增新闻</button> -->
    </div>


    <script type="text/html" id="barDemo">
        <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
        <a class="layui-btn layui-btn-xs" lay-event="detail">查看</a>
        <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
    </script>

    <script type="text/html" id="step">
        {{#  if(d.step==0){                    }}
        <div>step=0</div>
        {{#  }else if(d.step==1) {             }}
        <div>step=1</div>
        {{#  }else if(d.step==2) {             }}
        <div>step=2</div>
        {{#  }else if(d.step==3) {             }}
        <div>step=3</div>
        {{#  }else if(d.step==4) {             }}
        <div>step=4</div>
        {{#  }else if(d.step==5) {             }}
        <div>step=5</div>
        {{#  }                                 }}


    </script>

    <!--<script type="text/html" id="switchTpl">-->
    <!--&lt;!&ndash; 线上状态 &ndash;&gt;-->
    <!--<input type="checkbox" name="status" value="{{d.id}}" lay-skin="switch" lay-text="上线|下线" lay-filter="status" {{-->
    <!--d.status== 1 ? 'checked' : '' }}>-->
    <!--</script>-->
    <!--<script type="text/html" id="tuijian">-->
    <!--&lt;!&ndash; 是否推荐&ndash;&gt;-->
    <!--<input type="checkbox" name="tuijian" value="{{d.id}}" lay-skin="switch" lay-text="推荐|不推荐" lay-filter="tuijian"-->
    <!--{{ d.tuijian== 2 ? 'checked' : '' }}>-->
    <!--</script>-->

    <div style="display:none;" id="tool">
        <!-- <span>搜索关键字:</span>
        <div class="layui-inline">
            <input class="layui-input" name="id" id="demoReload" autocomplete="off">
        </div>
        <button class="layui-btn" lay-event="reload">
            <i class="layui-icon">&#xe615;</i>
            搜索
        </button> -->
        <button class="layui-btn " lay-event="add_library">
            <i class="layui-icon">&#xe654;</i> 新增
        </button>
        <button class="layui-btn " lay-event="delect_library">
            <i class="layui-icon">&#xe654;</i> 删除
        </button>
        <!--<button class="layui-btn " lay-event="add_yuyue">-->
        <!--<i class="layui-icon">&#xe654;</i> 新增接车预约单-->
        <!--</button>-->
        <!--        <button class="layui-btn  layui-btn-warm " lay-event="ok_getCar">-->
        <!--            <i class="layui-icon">&#xe654;</i> 查看资料办理进场-->
        <!--        </button>-->
        <!--        <button class="layui-btn  layui-btn-primary " lay-event="yy_getCar">-->
        <!--            <i class="layui-icon">&#xe654;</i> 预约接车单转为接车单-->
        <!--        </button>-->
        <!--        <button class="layui-btn  layui-btn-primary " lay-event="no_pair">-->
        <!--            <i class="layui-icon">&#xe654;</i> 检验区未配对成功的车架号-->
        <!--        </button>-->
        <!--        <button class="layui-btn layui-btn-danger" lay-event="no_in">-->
        <!--            <i class="layui-icon">&#xe640;</i> 拒绝进场-->
        <!--        </button>-->

    </div>

<!--    <div>表格显示数据:车牌,车型,司机姓名,手机号,创建时间</div>-->
    <!--数据表格主体-->
    <table id="customer_unit_library" lay-filter="customer_unit_library" class="layui-table"></table>


</div>

</body>
<div id="why_no" class="hide">
    <textarea style="width: 98%;margin-left: 1%;height: 180px;margin-top: 1%;" name="" placeholder="请输入"
              class="layui-textarea"></textarea>
</div>
<!--<script type="text/javascript" charset="UTF-8" src="${pageContext.request.contextPath }/statics/localjs/common.js"> </script>-->
<!--<script type="text/javascript" charset="UTF-8"-->
<!--src="<%=basePath%>utf8-jsp/ueditor.config.js"></script>-->
<!--<script type="text/javascript" charset="UTF-8" src="<%=basePath%>utf8-jsp/ueditor.all.min.js"></script>-->
<script type="text/javascript" src="../js/jquery-1.8.3.min.js"></script>
<script src="../js/layuiadmin/layui/layui.js"></script>
<script type="text/javascript" src="../layer_mobile/layer.js"></script>
<script type="text/javascript" src="../js/jquery.md5.js"></script>
<script type="text/javascript" src="../js/jquery-geturlcode.js"></script>
<script type="text/javascript" src="../js/jquery.cookie.js"></script>
<script src="../js/common/api.js"></script>
<script src="../js/common/localjs.js"></script>
<script type="text/javascript" src="../js/mui.min.js"></script>
<script>
    // $(function () {
    //     $("body").fadeOut(5000);
    // });
    //JavaScript代码区域
    layui.use('element', function () {
        var element = layui.element;


    });

</script>
<script>

    var zhi;
    layui.use(['table', 'laydate', 'jquery'], function () {

        var table = layui.table,
            form = layui.form,
            $ = layui.$,
            laydate = layui.laydate;


        //监听文本域输入的值
        $('textarea').bind('input propertychange', function () {
            zhi = $(this).val();
            console.log("输入的值为---", zhi);
        });


        //渲染时间选择
        laydate.render({
            elem: '#time' //指定元素
            , range: '-'
        });


        //渲染数据表格
        table.render({
            elem: '#customer_unit_library',
            id: 'customer_unit_library',
            url: Api.YS_Car_Manage.List,
            headers: {
                "KJCY-TOKEN": sessionStorage.getItem('token')
            },
            where: {},
            parseData: function (res) {
                console.log(res);
                return {
                    "code": res.code, //解析接口状态
                    "msg": res.msg, //解析提示文本
                    "count": res.data.total, //解析数据长度
                    "data": res.data.list //解析数据列表
                };
            },
            request: {
                pageName: 'page' //页码的参数名称，默认：page
                , limitName: 'count' //每页数据量的参数名，默认：limit
            },
            initSort: {
                field: 'create_time' //排序字段，对应 cols 设定的各字段名
                , type: 'desc' //排序方式  asc: 升序、desc: 降序、null: 默认排序
            },
            cols: [[
                {
                    type: 'checkbox'
                }
                , {
                    type: 'numbers'
                    , title: '编号'
                    , sort: true
                }
                , {
                    field: 'car_license',
                    title: "车牌"
                }
                , {
                    field: 'car_type',
                    title: "车型"
                }
                , {
                    field: 'driver_name',
                    title: '司机姓名'
                }
                , {
                    field: 'driver_mobile',
                    title: '手机号'
                }
                , {
                    field: 'create_time',
                    title: '创建时间'
                    //,sort : true
                }
                , {
                    title: '操作',
                    fixed: 'right',
                    width: 200,
                    toolbar: '#barDemo'
                }
            ]],
            page: true,
            limit: 20,
            limits: [1, 2, 4, 8, 16, 20],
            toolbar: '#tool'
        });


        form.on('select(complete)', function (data) {
            console.log(data.elem); //得到select原始DOM对象
            console.log(data.value); //得到被选中的值
            console.log(data.othis); //得到美化后的DOM对象

            table.reload('customer_unit_library', {
                page: {
                    curr: 1 //重新从第 1 页开始
                },
                where: {
                    entry: data.value
                }
            });
        });


        //监听线上操作
//        form.on('switch(status)', function (obj) {
//            //layer.tips(this.value + ' ' + this.name + '：' + obj.elem.checked, obj.othis);
//            var id = this.value;
//            if (obj.elem.checked) {
//                //layer.confirm('要上线吗', function(index) {
//                $.ajax({
//                    type: "POST",
//                    url: path + "/voteback/xx.html",
//                    data: {
//                        "status": 1,
//                        "id": id
//                    },
//                    dataType: "json",
//                    success: function (data) {
//                        if (data.bb == "yes") {
//                            //layer.alert("上线成功!");
//                            //$('#shuaxing').click();
//                        } else {
//                            layer.alert("上线失败!");
//                        }
//                    },
//                    error: function () {
//                        alert("上线操作失败");
//                    }
//                });
//                //});
//
//            } else if (!obj.elem.checked) {
//                //layer.confirm('要下线吗', function(index) {
//                $.ajax({
//                    type: "POST",
//                    url: path + "/voteback/xx.html",
//                    data: {
//                        "status": 2,
//                        "id": id
//                    },
//                    dataType: "json",
//                    success: function (data) {
//                        if (data.bb == "yes") {
//                            //layer.alert("下线成功!");
//                            //$('#shuaxing').click();
//                        } else {
//                            layer.alert("下线失败!");
//                        }
//                    },
//                    error: function () {
//                        alert("下线操作失败");
//                    }
//                });
//                //});
//            }
//        });

//        form.on('switch(tuijian)', function (obj) {
//            //layer.tips(this.value + ' ' + this.name + '：' + obj.elem.checked, obj.othis);
//            var id = this.value;
//            if (obj.elem.checked) {
//                //layer.confirm('要上线吗', function(index) {
//                $.ajax({
//                    type: "POST",
//                    url: path + "/voteback/tuijian.html",
//                    data: {
//                        "tuijian": 2,
//                        "id": id
//                    },
//                    dataType: "json",
//                    success: function (data) {
//                        if (data.res == "yes") {
//                            //layer.alert("推荐成功!");
//                            //$('#shuaxing').click();
//                        } else {
//                            layer.alert("推荐失败!");
//                        }
//                    },
//                    error: function () {
//                        alert("推荐操作失败");
//                    }
//                });
//                //});
//
//            } else if (!obj.elem.checked) {
//                //layer.alert("取消推荐成功!");
//                //layer.confirm('要下线吗', function(index) {
//                $.ajax({
//                    type: "POST",
//                    url: path + "/voteback/tuijian.html",
//                    data: {
//                        "tuijian": 1,
//                        "id": id
//                    },
//                    dataType: "json",
//                    success: function (data) {
//                        if (data.res == "yes") {
//                            //layer.alert("取消推荐成功!");
//                            //$('#shuaxing').click();
//                        } else {
//                            layer.alert("取消推荐失败!");
//                        }
//                    },
//                    error: function () {
//                        alert("取消推荐操作失败");
//                    }
//                });
//                //});
//            }
//        });


        //监听单元格编辑
//        table.on('edit(test)', function (obj) {
//            var value = obj.value, //得到修改后的值
//                data = obj.data, //得到所在行所有键值
//                field = obj.field; //得到字段
//            //layer.msg('[ID: ' + data.id + '] ' + field + ' 字段更改为：' + value);
//            $.post(path + '/voteback/pro/modifity_PaiXu', {
//                "id": data.id,
//                "asc": data.asc
//            }, function (res) {
//                table.reload('news', {
//                    page: {
//                        curr: 1 //重新从第 1 页开始
//                    }
//                });
//            }, 'json');
//
//
//        });


        //监听表格复选框选择
        table.on('checkbox(customer_unit_library)', function (obj) {
            // console.log(obj)
        });

        //监听行单击事件
        table.on('rowDouble(customer_unit_library)', function (obj) {
            //console.log(obj.tr) //得到当前行元素对象
            console.log(obj.data) //得到当前行数据
            var id = obj.data.id;
            //obj.del(); //删除当前行
            //obj.update(fields) //修改当前行数据
            //检测能否办理进场
            ajaxSubmit({receive_id: id}, Api.FWDT_YuYue_bljc.Check_bljc, "GET", function (res) {
                console.log("检查能否办理进场办理", res);
                var as = layer.open({
                    id: "ok_getCar",
                    type: 2,
                    title: '办理进场',
                    maxmin: true,
                    shadeClose: false,
                    shade: 0.8,
                    //area: ['1500px', '800px'],
                    //content : path+'/voteback/add.html',
                    content: 'get_Car_in_add.html?id=' + id, //iframe的url
                    success: function (layero, index) {
                        //传入参数，并赋值给iframe的元素
                    },
                    end: function (res) {
                        table.reload('customer_unit_library', {
                            page: {
                                curr: 1 //重新从第 1 页开始
                            }
                        });
                    }
                });
                layer.full(as);
            });


        });


        //监听头工具事件
        table.on('toolbar(customer_unit_library)', function (obj) {
            var checkStatus = table.checkStatus(obj.config.id);
            var data = checkStatus.data;
            var all = JSON.stringify(data);//获取选中的对象的json数组

            //console.log(all);

            switch (obj.event) {
                case 'reload':
                    var demoReload = $('#demoReload');
                    //执行重载
                    table.reload('customer_unit_library', {
                        page: {
                            curr: 1 //重新从第 1 页开始
                        },
                        where: {
                            keyword: demoReload.val()
                        }
                    });
                    break;
                case 'add_library':
                    var as = layer.open({
                        id: "add_library",
                        type: 2,
                        title: '添加接车单',
                        maxmin: true,
                        shadeClose: false,
                        shade: 0.8,
                        //area: ['1500px', '800px'],
                        //content : path+'/voteback/add.html',
                        content: 'transport_car_manage_add.html', //iframe的url
                        success: function (layero, index) {
                            //传入参数，并赋值给iframe的元素
                        }
                    });
                    layer.full(as);
                    break;

                case 'add_yuyue':
                    var as = layer.open({
                        id: "add_yuyue",
                        type: 2,
                        title: '添加预约单',
                        maxmin: true,
                        shadeClose: false,
                        shade: 0.8,
                        //area: ['1500px', '800px'],
                        //content : path+'/voteback/add.html',
                        content: 'reservation_storage_add.html', //iframe的url
                        success: function (layero, index) {
                            //传入参数，并赋值给iframe的元素
                        }
                    });
                    layer.full(as);
                    break;
                case 'ok_getCar':
//                   ajaxSubmit({receive_id:id},Api.FWDT_YuYue_bljc.Check_bljc,"GET",function (res) {
                    //console.log(res);
                    console.log(data);
                    console.log(data.length);
//                    console.log(data[0].id);


                    if (data.length == 1) {
                        $.each(data, function (idx, obj) {
                            ajaxSubmit({receive_id: obj.id}, Api.FWDT_YuYue_bljc.Check_bljc, "GET", function (res) {
                                var as = layer.open({
                                    id: "ok_getCar",
                                    type: 2,
                                    title: '办理进场',
                                    maxmin: true,
                                    shadeClose: false,
                                    shade: 0.8,
                                    //area: ['1500px', '800px'],
                                    //content : path+'/voteback/add.html',
                                    content: 'get_Car_in_add.html?id=' + obj.id, //iframe的url
                                    success: function (layero, index) {
                                        //传入参数，并赋值给iframe的元素
                                    },
                                    end: function (res) {
                                        table.reload('customer_unit_library', {
                                            page: {
                                                curr: 1 //重新从第 1 页开始
                                            }
                                        });
                                    }
                                });
                                layer.full(as);
                            });

//                            ajaxSubmit({receive_id: obj.id}, Api.FWDT_YuYue_bljc.Submit_bljc, "GET", function (res) {
//                                console.log("办理进场成功", res);
//
//                            });


                        });
                    } else if (data.length == 0) {
                        layer.msg("请选择一个车辆办理");
                    } else {
                        layer.msg("只能选择一个车辆办理");
                    }


                    break;
                case 'no_in':
//                   ajaxSubmit({receive_id:id},Api.FWDT_YuYue_bljc.Check_bljc,"GET",function (res) {
                    //console.log(res);
                    console.log(data);
                    console.log(data.length);
//                    console.log(data[0].id);


                    if (data.length == 1) {
                        $.each(data, function (idx, obj) {

                            layer.open({
                                type: 1,
                                shade: [0.8, '#393D49'],
                                shadeClose: true,
                                tipsMore: true,
                                title: "拒绝意见",
                                skin: 'layui-layer-rim', //加上边框
                                area: ['500px', '300px'], //宽高
                                content: $("#why_no"),
                                btn: ['确认提交', '取消'],
                                yes: function (index, layero) {
                                    console.log("点击了按钮一");

                                    var receive_id = data[0].id;
                                    var reason = zhi;
                                    if (reason == null || reason == "") {
                                        layer.msg("请填写拒绝意见", {
                                            icon: 5,
                                            time: 1000 //2秒关闭（如果不配置，默认是3秒）
                                        });
                                    } else {
                                        console.log("获得的值----", reason);
                                        console.log("获得的receive_id----", receive_id);
                                        ajaxSubmit({
                                            receive_id: receive_id,
                                            reason: reason
                                        }, Api.FWDT_YuYue_bljc.Jujue_bljc, "GET", function (res) {
                                            console.log(res);
                                        });

                                    }

                                },
                                btn2: function (index, layero) {
                                    console.log("点击了按钮二");
                                    console.log("取消了");
                                    $("textarea").val("");
                                },
                                cancel: function (index, layero) {
                                    console.log("点击了取消");
                                    $("textarea").val("");
                                }
                            });


//                            var as = layer.open({
//                                id: "ok_getCar",
//                                type: 2,
//                                title: '办理进场',
//                                maxmin: true,
//                                shadeClose: false,
//                                shade: 0.8,
//                                //area: ['1500px', '800px'],
//                                //content : path+'/voteback/add.html',
//                                content: 'get_Car_in_add.html?id=' + obj.id, //iframe的url
//                                success: function (layero, index) {
//                                    //传入参数，并赋值给iframe的元素
//                                },
//                                end: function (res) {
//                                    table.reload('customer_unit_library', {
//                                        page: {
//                                            curr: 1 //重新从第 1 页开始
//                                        }
//                                    });
//                                }
//                            });
//                            layer.full(as);


                        });
                    } else if (data.length == 0) {
                        layer.msg("请选择一个车辆");
                    } else {
                        layer.msg("只能选择一个车辆");
                    }


                    break;
                case 'yy_getCar':
                    var as = layer.open({
                        id: "yyTojieche",
                        type: 2,
                        title: '预约单转为接车单',
                        maxmin: true,
                        shadeClose: false,
                        shade: 0.8,
                        //area: ['1500px', '800px'],
                        //content : path+'/voteback/add.html',
                        content: "receive_car_list_add_yy.html", //iframe的url
                        success: function (layero, index) {
                            //传入参数，并赋值给iframe的元素
                        },
                        end: function () {
                            table.reload('customer_unit_library', {
                                page: {
                                    curr: 1 //重新从第 1 页开始
                                }
                            });
                        }
                    });
                    layer.full(as);
                    break;
                case 'no_pair':
                    var as = layer.open({
                        id: "no_pair",
                        type: 2,
                        title: '未配对成功的车架号',
                        maxmin: true,
                        shadeClose: false,
                        shade: 0.8,
                        //area: ['1500px', '800px'],
                        //content : path+'/voteback/add.html',
                        content: "no_pair_list.html", //iframe的url
                        success: function (layero, index) {
                            //传入参数，并赋值给iframe的元素
                        },
                        end: function () {
                            table.reload('customer_unit_library', {
                                page: {
                                    curr: 1 //重新从第 1 页开始
                                }
                            });
                        }
                    });
                    layer.full(as);
                    break;
                case 'del_library':
                    console.log(data);
                    var json = {};
                    var ids = [];
                    $.each(data, function (idx, obj) {
                        var a = {};
                        a["id"] = obj.id;
                        ids.push(a);
                    })
                    json["ids"] = ids;
                    console.log(json);

                    layer.confirm('真的要删除吗', function (index) {
                        ajaxSubmit(json, Api.FWDT_jieche.Delect_jieche_ByIds, "POST", function success(res) {
                            layer.msg("删除成功");
                            table.reload('customer_unit_library', {
                                page: {
                                    curr: 1 //重新从第 1 页开始
                                }
                            });
                        }, "json");
                    });

                    break;

            }


        });


        //监听工具条
        table.on('tool(customer_unit_library)', function (obj) {
            var data = obj.data;
            if (obj.event === 'detail') {
                //layer.msg('ID：' + data.id + ' 的查看操作');
                var aa = layer.open({
                    id: "layer_say_hello",
                    type: 2,
                    title: data.title,
                    maxmin: true,
                    shadeClose: false,
                    shade: 0.8,
                    area: ['1000px', '800px'],
                    //content : path+'/voteback/add.html',
                    content: 'transport_car_manage_Mot.html?type=0&id=' + data.id, //iframe的url
                    success: function (layero, index) {
                        //传入参数，并赋值给iframe的元素
                        $('#shuaxing').click();
                    }
                });
                layer.full(aa);
            } else if (obj.event === 'del') {
//                function tan(res) {
//                    if(res.msg=="success"){
//                        layer.msg("删除成功");
//                        table.reload('customer_unit_library', {
//                            page: {
//                                curr: 1 //重新从第 1 页开始
//                            }
//                        });
//                    }
//                }
                layer.confirm('真的要删除吗', function (index) {
                    ajaxSubmit({id: data.id}, Api.FWDT_jieche.Delect_jieche_ById, "GET", function success(res) {
                        layer.msg("删除成功");
                        table.reload('customer_unit_library', {
                            page: {
                                curr: 1 //重新从第 1 页开始
                            }
                        });
                    });
                });
            } else if (obj.event === 'edit') {
                //layer.alert('编辑行：<br>' + JSON.stringify(data));
                var as = layer.open({
                    id: "Modifity",
                    type: 2,
                    title: "编辑",
                    maxmin: true,
                    shadeClose: false,
                    shade: 0.8,
                    area: ['1500px', '800px'],
                    //content : path+'/voteback/add.html',
                    content: 'transport_car_manage_Mot.html?id=' + data.id, //iframe的url
                    success: function (layero, index) {
                        //传入参数，并赋值给iframe的元素
                    }
                });
                layer.full(as);
            } else if (obj.event === 'wanshan') {//跳转到完善资料页面
                //layer.alert('编辑行：<br>' + JSON.stringify(data));
                var as = layer.open({
                    id: "Modifity",
                    type: 2,
                    title: "编辑",
                    maxmin: true,
                    shadeClose: false,
                    shade: 0.8,
                    area: ['1500px', '800px'],
                    //content : path+'/voteback/add.html',
                    content: 'get_Car_in_add.html?ism=1&id=' + data.id, //iframe的url
                    success: function (layero, index) {
                        //传入参数，并赋值给iframe的元素
                    }
                });
                layer.full(as);
            }
        });
        var $ = layui.$,
            active = {
                //关键字搜索
                reload: function () {
                    var demoReload = $('#demoReload');
                    var time = $('#time');
                    console.log(demoReload.val());
                    //执行重载
                    table.reload('customer_unit_library', {
                        page: {
                            curr: 1 //重新从第 1 页开始
                        },
                        where: {
                            keyword: demoReload.val(),
                            dateStr: time.val()
                        }
                    });
                },
                timeselect: function () {
                    var time = $('#time');
                    var demoReload = $('#demoReload');
                    console.log(time.val());
                    table.reload('customer_unit_library', {
                        page: {
                            curr: 1 //重新从第 1 页开始
                        },
                        where: {
                            keyword: demoReload.val(),
                            dateStr: time.val()
                        }
                    });
                },
                shuaxing: function () {
                    //var demoReload = $('#demoReload');
                    //执行重载
                    table.reload('news', {
                        page: {
                            curr: 1 //重新从第 1 页开始
                        }
                    });
                },
                addSort1: function () {
                    //var demoReload = $('#demoReload');
                    //弹出添加用户窗口
                    var index = layer.open({
                        id: "addNews",
                        type: 2,
                        title: '添加新闻',
                        maxmin: true,
                        shadeClose: false,
                        shade: 0.8,
                        area: ['1500px', '800px'],
                        //content : path+'/voteback/add.html',
                        content: path + '/voteback/add.html', //iframe的url
                        success: function (layero, index) {
                            //传入参数，并赋值给iframe的元素
                        }
                    });
                    layer.full(index);
                }
            };


        $('.demoTable .layui-btn').on('click', function () {
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });


        //-----------------------------2号表格(预约接车单)操作--------------------------------------


    });
</script>

</html>